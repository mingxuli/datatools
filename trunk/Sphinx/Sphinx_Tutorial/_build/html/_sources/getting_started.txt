.. _installing-docdir:


***************
Sphinx安装
***************

首选需要说明的是,本安装时在windows环境下执行的。如果你已经下载并安装了 `sphinx <http://sphinx.pocoo.org/>`_
你可以在python环境下通过如下方式进行检验::

  >>> import sphinx
  
如果没有错误的提示，说明你已经正确安装。否则的话，请安装python的sphinx模块。sphinx没有提供windows .exe安装包，必须通过easy_install工具进行安装。你可以通过`Python Package Index <http://pypi.python.org/pypi/Sphinx>`_ 下载 EGG文件进行安装,也可以直接在线安装::

  > easy_install -U Sphinx

现在你可以使用sphinx-quickstart命令建立你自己的文档模板了,不过在此之前你需要建立一个目录来存放你的文档，如（d:\sampledoc）, 进入目录，在命令窗口中执行命令::

  > sphinx-quickstart

然后回答相关的问题，如果你不知道该如何回答，可以直接按下回车键，接受默认设置. 本教程使用"sampledoc"作为文档工程的名称，默认情况下创建的文件和文件夹如下::

  _build
  _static
  _templates
  conf.py
  index.rst
  make.bat
  Makefile

index.rst文件就是这个文档的首页,在添加内容之前，我们先看看默认的界面是什么样子的，直接编译成html格式，在DOS命令行中执行命令::

  > make html

点击浏览 :file:`d:\\sampledoc\\_build\\html\\index.html` 页面,你可以看到如下页面.

.. image:: _static/basic_screenshot.png


.. _fetching-the-data:

牛刀小试--修改主页
==================

现在我们可以开始修改文档了，在此之前请下载本文档的代码，请从 `网站
<http://matplotlib.svn.sourceforge.net/viewvc/matplotlib/trunk/sampledoc_tut/>`_
或通过svn下载. 现在你需要 :file:`getting_started.rst` 和 :file:`_static/basic_screenshot.png`.
所有的文件都在本文档的最终版本中,下面是所有文件的列表::

  A    sampledoc_tut/cheatsheet.rst
  A    sampledoc_tut/_static
  A    sampledoc_tut/_static/basic_screenshot.png
  A    sampledoc_tut/conf.py
  A    sampledoc_tut/Makefile
  A    sampledoc_tut/_templates
  A    sampledoc_tut/_build
  A    sampledoc_tut/getting_started.rst
  A    sampledoc_tut/index.rst

接下来是修改文件 :file:`index.rst`, 让他包含文件 :file:`getting_started.rst` ,修改的时候要注意，getting_started.rst的第一个字符g需要与:maxdepth: 2的第一个冒号对齐, 原始代码如下::

  Contents:

  .. toctree::
     :maxdepth: 2

     getting_started.rst

可以编译了，在命令行中，进入sampledoc文件夹，执行make 命令，编译为html格式的文档::

  cd sampledoc
  make html


刷新浏览器，或者打开文件 :file:`_build/html/index.html` ，你可以看到首页中已经链接了
"Getting Started" 文档，并且相关的标题也自动进入进来了，很神奇吧。

下一节我们将参照 `sphinx <http://sphinx.pocoo.org/>`_ 网站的样子，对我们的文档进行修改 -- 请参阅
:ref:`custom_look`.


